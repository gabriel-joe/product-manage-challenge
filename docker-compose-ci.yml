version: '3'
services:
  sonarqube:
    build:
      context: ./sonarqube/
      dockerfile: Dockerfile
    ports:
      - '9000:9000'
    command:
       - -Dsonar.ce.javaOpts=-Xmx2048m -Dsonar.web.javaOpts=-Xmx2048m
  nexus:
    build:
      context: ./nexus/
      dockerfile: Dockerfile
    ports:
      - '8081:8081'
  jenkins:
    build:
      context: ./jenkins/
      dockerfile: Dockerfile
    environment:
      - SONAR_TOKEN=78326fa3d16542f6f9a28d4b7ac2d1ecf8f169b7
    image: product-review
    container_name: jenkins-ci
    command: sh -c "(/var/tmp/start-configure-jenkins.sh&) && /usr/local/bin/jenkins.sh"
    ports:
      - '8080:8080'
      - '50000:50000'
      
    

