version: '3'
services:
  sonarqube:
    build:
      context: ./sonarqube/
      dockerfile: Dockerfile
    ports:
      - '9000:9000'
    command:
       - -Dsonar.ce.javaOpts=-Xmx2048m -Dsonar.web.javaOpts=-Xmx2048m
  jenkins:
    build:
      context: ./jenkins/
      dockerfile: Dockerfile
    image: product-review
    container_name: jenkins-ci
    command: sh -c "(/var/tmp/start-configure-jenkins.sh&) && /usr/local/bin/jenkins.sh"
    ports:
      - '8080:8080'
      - '50000:50000'
      
    

